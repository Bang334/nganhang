@startuml Activity - Đáo hạn: Rút tiền

title Đáo hạn TK - Lựa chọn 1: Rút tiền

|Hệ thống|
start
:Phát hiện sổ đáo hạn;

:Tính lãi;
note right
  Lãi = Gốc × Lãi suất × Thời gian
end note

:Tổng = Gốc + Lãi;

:Gửi thông báo KH;

|Khách hàng|
:Chọn "Rút tiền";

|Hệ thống|
:START TRANSACTION;
:UPDATE SavingsDeposits\nstatus = CLOSED;
:UPDATE Accounts\nbalance += total_amount;
:INSERT Transaction;
:COMMIT;

:Gửi SMS xác nhận;

|Khách hàng|
:Nhận tiền về TK;

stop

@enduml

