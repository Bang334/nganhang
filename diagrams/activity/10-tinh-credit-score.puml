@startuml Activity - Tính Credit Score

title Tính toán Credit Score (5 yếu tố)

start

:Thu thập dữ liệu khách hàng;

partition "Factor 1: Lịch sử (35%)" {
  :Đếm số lần trả đúng hạn;
  :Đếm số lần trả chậm;
  :Check nợ xấu;
  :Score1 = 350 - penalties;
}

partition "Factor 2: Sử dụng TD (30%)" {
  :Tính DTI ratio;
  :Đếm số khoản vay;
  :Tính tỷ lệ sử dụng thẻ;
  :Score2 = calculate();
}

partition "Factor 3: Thời gian (15%)" {
  :Tính tuổi khách hàng;
  :Tính tuổi TK cũ nhất;
  if (>= 10 năm?) then (yes)
    :Score3 = 150;
  elseif (>= 5 năm?) then (yes)
    :Score3 = 100;
  else
    :Score3 = 20-60;
  endif
}

partition "Factor 4: Yêu cầu mới (10%)" {
  :Đếm số lần vay\ntrong 6 tháng;
  :Score4 = 100 - (count × 15);
}

partition "Factor 5: Cơ cấu (10%)" {
  :Đếm loại sản phẩm;
  :Score5 = diversity score;
}

:Total = Score1 + Score2 +\nScore3 + Score4 + Score5;

:Xác định grade;
note right
  900-1000: AAA
  800-899: AA
  700-799: A
  600-699: BBB
  ...
end note

:Lưu vào DB;

stop

@enduml

