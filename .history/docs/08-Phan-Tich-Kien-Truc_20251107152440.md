# PHÃ‚N TÃCH THIáº¾T Káº¾ KIáº¾N TRÃšC Há»† THá»NG

## ğŸ“‹ Má»¥c lá»¥c
1. [Tá»•ng quan kiáº¿n trÃºc](#1-tá»•ng-quan-kiáº¿n-trÃºc)
2. [Kiáº¿n trÃºc tá»•ng thá»ƒ](#2-kiáº¿n-trÃºc-tá»•ng-thá»ƒ)
3. [Kiáº¿n trÃºc Frontend](#3-kiáº¿n-trÃºc-frontend)
4. [Kiáº¿n trÃºc Database](#4-kiáº¿n-trÃºc-database)
5. [Luá»“ng dá»¯ liá»‡u](#5-luá»“ng-dá»¯-liá»‡u)
6. [Báº£o máº­t vÃ  PhÃ¢n quyá»n](#6-báº£o-máº­t-vÃ -phÃ¢n-quyá»n)
7. [Má»Ÿ rá»™ng vÃ  Tá»‘i Æ°u](#7-má»Ÿ-rá»™ng-vÃ -tá»‘i-Æ°u)

---

## 1. Tá»•ng quan kiáº¿n trÃºc

### 1.1. MÃ´ hÃ¬nh kiáº¿n trÃºc

Há»‡ thá»‘ng Ä‘Æ°á»£c thiáº¿t káº¿ theo mÃ´ hÃ¬nh **3-Tier Architecture** (Kiáº¿n trÃºc 3 táº§ng):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     PRESENTATION LAYER (Frontend)      â”‚
â”‚         React 18 + Vite                 â”‚
â”‚     - Customer Dashboard                â”‚
â”‚     - Admin Dashboard                    â”‚
â”‚     - Teller Dashboard                  â”‚
â”‚     - Loan Officer Dashboard            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      BUSINESS LOGIC LAYER (Backend)      â”‚
â”‚     (Dá»± kiáº¿n: Spring Boot / Node.js)    â”‚
â”‚     - API Gateway                        â”‚
â”‚     - Service Layer                      â”‚
â”‚     - Authentication & Authorization    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      DATA LAYER (Database)              â”‚
â”‚         MySQL 8.0                        â”‚
â”‚     - 25+ Tables                         â”‚
â”‚     - Triggers, Views, Stored Proceduresâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2. Technology Stack

#### Frontend (ÄÃ£ triá»ƒn khai âœ…)
- **Framework**: React 18
- **Build Tool**: Vite 7.1.7
- **Routing**: React Router DOM 7.9.4
- **Charts**: Recharts 3.3.0
- **Icons**: Lucide React 0.546.0
- **Styling**: CSS3 vá»›i CSS Variables
- **State Management**: React Hooks (useState, useContext)

#### Backend (Dá»± kiáº¿n)
- **Framework**: Spring Boot / Node.js + Express
- **API**: RESTful API
- **Authentication**: JWT Token
- **Validation**: Joi / Bean Validation

#### Database (ÄÃ£ thiáº¿t káº¿ âœ…)
- **RDBMS**: MySQL 8.0
- **Character Set**: utf8mb4
- **Collation**: utf8mb4_unicode_ci
- **Engine**: InnoDB

---

## 2. Kiáº¿n trÃºc tá»•ng thá»ƒ

### 2.1. Component Architecture

Há»‡ thá»‘ng Ä‘Æ°á»£c tá»• chá»©c theo mÃ´ hÃ¬nh **Component-Based Architecture**:

```
frontend/src/
â”œâ”€â”€ pages/                    # Route-level components
â”‚   â”œâ”€â”€ LoginPage.jsx
â”‚   â”œâ”€â”€ CustomerDashboard.jsx
â”‚   â”œâ”€â”€ AdminDashboard.jsx
â”‚   â”œâ”€â”€ TellerDashboard.jsx
â”‚   â””â”€â”€ LoanOfficerDashboard.jsx
â”‚
â”œâ”€â”€ components/               # Feature components
â”‚   â”œâ”€â”€ customer/            # Customer-specific components
â”‚   â”‚   â”œâ”€â”€ Overview.jsx
â”‚   â”‚   â”œâ”€â”€ Accounts.jsx
â”‚   â”‚   â”œâ”€â”€ Transfer.jsx
â”‚   â”‚   â”œâ”€â”€ Loans.jsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ admin/               # Admin-specific components
â”‚   â”‚   â”œâ”€â”€ Overview.jsx
â”‚   â”‚   â”œâ”€â”€ BranchManagement.jsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ teller/              # Teller-specific components
â”‚   â”‚   â”œâ”€â”€ NewAccount.jsx
â”‚   â”‚   â”œâ”€â”€ Deposit.jsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ loanOfficer/         # Loan Officer-specific components
â”‚   â”‚   â”œâ”€â”€ PendingLoans.jsx
â”‚   â”‚   â”œâ”€â”€ CollateralVerification.jsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ common/              # Shared components
â”‚       â”œâ”€â”€ Modal.jsx
â”‚       â””â”€â”€ ProfileEditModal.jsx
â”‚
â”œâ”€â”€ data/                     # Data layer
â”‚   â””â”€â”€ mockData.js          # Mock data & helper functions
â”‚
â””â”€â”€ styles/                   # Styling
    â”œâ”€â”€ Dashboard.css
    â”œâ”€â”€ LoginPage.css
    â””â”€â”€ Modal.css
```

### 2.2. Routing Architecture

Há»‡ thá»‘ng sá»­ dá»¥ng **Role-Based Routing** vá»›i React Router:

```javascript
/                           â†’ LoginPage
/customer/*                 â†’ CustomerDashboard (role: CUSTOMER)
/admin/*                   â†’ AdminDashboard (role: ADMIN)
/teller/*                  â†’ TellerDashboard (role: TELLER)
/loan-officer/*            â†’ LoanOfficerDashboard (role: LOAN_OFFICER)
```

**Route Protection**: Má»—i route Ä‘Æ°á»£c báº£o vá»‡ bá»Ÿi Ä‘iá»u kiá»‡n kiá»ƒm tra role:
```jsx
element={user?.role === 'CUSTOMER' ? <CustomerDashboard /> : <Navigate to="/" />}
```

### 2.3. Data Flow Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Action â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Component   â”‚ (useState, event handlers)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  mockData.js â”‚ (Helper functions)
â”‚  - getCustomerAccounts()
â”‚  - getPendingLoansWithDetails()
â”‚  - formatCurrency()
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mock Data   â”‚ (Static data arrays)
â”‚  - customers
â”‚  - accounts
â”‚  - loans
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Hiá»‡n táº¡i (Mock Data)**:
- Dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ trong `mockData.js` dÆ°á»›i dáº¡ng arrays
- Helper functions xá»­ lÃ½ filtering, mapping, vÃ  formatting
- Components gá»i trá»±c tiáº¿p helper functions

**TÆ°Æ¡ng lai (API Integration)**:
- Components sáº½ gá»i API endpoints thay vÃ¬ helper functions
- API sáº½ tráº£ vá» JSON data
- State management cÃ³ thá»ƒ nÃ¢ng cáº¥p lÃªn Context API hoáº·c Redux

---

## 3. Kiáº¿n trÃºc Frontend

### 3.1. Component Hierarchy

#### Customer Dashboard
```
CustomerDashboard
â”œâ”€â”€ Sidebar (Navigation)
â”œâ”€â”€ Header (User info, logout)
â””â”€â”€ Content Area
    â”œâ”€â”€ Overview (Dashboard vá»›i charts)
    â”œâ”€â”€ Accounts (Danh sÃ¡ch tÃ i khoáº£n)
    â”œâ”€â”€ Transfer (Form chuyá»ƒn khoáº£n)
    â”œâ”€â”€ Transactions (Lá»‹ch sá»­ giao dá»‹ch)
    â”œâ”€â”€ Savings (Quáº£n lÃ½ tiáº¿t kiá»‡m)
    â”œâ”€â”€ Loans (Danh sÃ¡ch khoáº£n vay)
    â”œâ”€â”€ LoanApplication (ÄÄƒng kÃ½ vay má»›i)
    â”œâ”€â”€ Assets (TÃ i sáº£n tháº¿ cháº¥p)
    â”œâ”€â”€ CreditScore (Äiá»ƒm tÃ­n dá»¥ng)
    â””â”€â”€ Profile (ThÃ´ng tin cÃ¡ nhÃ¢n)
```

#### Admin Dashboard
```
AdminDashboard
â”œâ”€â”€ Sidebar
â”œâ”€â”€ Header
â””â”€â”€ Content Area
    â”œâ”€â”€ Overview (Thá»‘ng kÃª tá»•ng quan)
    â”œâ”€â”€ BranchManagement (Quáº£n lÃ½ chi nhÃ¡nh)
    â”œâ”€â”€ EmployeeManagement (Quáº£n lÃ½ nhÃ¢n viÃªn)
    â””â”€â”€ Reports (BÃ¡o cÃ¡o)
```

#### Teller Dashboard
```
TellerDashboard
â”œâ”€â”€ Sidebar
â”œâ”€â”€ Header
â””â”€â”€ Content Area
    â”œâ”€â”€ Overview
    â”œâ”€â”€ NewAccount (Má»Ÿ tÃ i khoáº£n má»›i)
    â”œâ”€â”€ Deposit (Náº¡p tiá»n)
    â”œâ”€â”€ Withdraw (RÃºt tiá»n)
    â””â”€â”€ CardActivation (KÃ­ch hoáº¡t tháº»)
```

#### Loan Officer Dashboard
```
LoanOfficerDashboard
â”œâ”€â”€ Sidebar
â”œâ”€â”€ Header
â””â”€â”€ Content Area
    â”œâ”€â”€ Overview
    â”œâ”€â”€ PendingLoans (Há»“ sÆ¡ chá» duyá»‡t)
    â”œâ”€â”€ ApprovedLoans (Há»“ sÆ¡ Ä‘Ã£ duyá»‡t)
    â”œâ”€â”€ RejectedLoans (Há»“ sÆ¡ tá»« chá»‘i)
    â”œâ”€â”€ OverdueLoans (Ná»£ quÃ¡ háº¡n)
    â”œâ”€â”€ CollateralVerification (Tháº©m Ä‘á»‹nh tÃ i sáº£n)
    â””â”€â”€ CreditScoreManagement (Quáº£n lÃ½ Ä‘iá»ƒm tÃ­n dá»¥ng)
```

### 3.2. State Management Pattern

**Hiá»‡n táº¡i**: Sá»­ dá»¥ng **Local Component State** vá»›i React Hooks:

```javascript
// Component-level state
const [formData, setFormData] = useState({
  fromAccount: '',
  toBank: 'ABC',
  toAccount: '',
  amount: '',
  description: '',
});

// Derived state
const isInternalTransfer = formData.toBank === 'ABC';
```

**Æ¯u Ä‘iá»ƒm**:
- ÄÆ¡n giáº£n, dá»… hiá»ƒu
- PhÃ¹ há»£p vá»›i á»©ng dá»¥ng nhá»
- KhÃ´ng cáº§n thÆ° viá»‡n bÃªn ngoÃ i

**NhÆ°á»£c Ä‘iá»ƒm**:
- KhÃ³ chia sáº» state giá»¯a cÃ¡c components
- Prop drilling khi cáº§n truyá»n state xuá»‘ng nhiá»u cáº¥p

**TÆ°Æ¡ng lai**: CÃ³ thá»ƒ nÃ¢ng cáº¥p lÃªn:
- **Context API**: Cho global state (user, theme, language)
- **Redux Toolkit**: Náº¿u á»©ng dá»¥ng phá»©c táº¡p hÆ¡n

### 3.3. Styling Architecture

Há»‡ thá»‘ng sá»­ dá»¥ng **CSS Modules + CSS Variables**:

```css
/* index.css - Global variables */
:root {
  --primary-color: #3b82f6;
  --secondary-color: #64748b;
  --success-color: #10b981;
  --danger-color: #ef4444;
  --bg-primary: #ffffff;
  --bg-secondary: #f8fafc;
  --text-primary: #1e293b;
  --text-secondary: #64748b;
}

/* Component-specific styles */
.card {
  background: var(--bg-primary);
  border-radius: 12px;
  padding: 1.5rem;
}
```

**Æ¯u Ä‘iá»ƒm**:
- Dá»… maintain vÃ  consistent
- CSS Variables cho theming
- Component-scoped styles

### 3.4. Data Fetching Pattern

**Hiá»‡n táº¡i (Mock Data)**:
```javascript
// Helper functions trong mockData.js
export const getCustomerAccounts = (customerId) => {
  return accounts
    .filter(a => a.customer_id === customerId)
    .map(account => {
      // Enrich data vá»›i account type info
      const accountType = accountTypes.find(...);
      return { ...account, accountTypeName: accountType?.type_name };
    });
};

// Component sá»­ dá»¥ng
const accounts = getCustomerAccounts(customerId);
```

**TÆ°Æ¡ng lai (API Integration)**:
```javascript
// Custom hook
const useCustomerAccounts = (customerId) => {
  const [accounts, setAccounts] = useState([]);
  const [loading, setLoading] = useState(true);
  
  useEffect(() => {
    fetch(`/api/customers/${customerId}/accounts`)
      .then(res => res.json())
      .then(data => {
        setAccounts(data);
        setLoading(false);
      });
  }, [customerId]);
  
  return { accounts, loading };
};
```

---

## 4. Kiáº¿n trÃºc Database

### 4.1. Database Schema Structure

Database Ä‘Æ°á»£c tá»• chá»©c thÃ nh **5 nhÃ³m chÃ­nh**:

```
Database: BankManagementSystem
â”‚
â”œâ”€â”€ 1. QUáº¢N LÃ Tá»” CHá»¨C
â”‚   â”œâ”€â”€ Branches (Chi nhÃ¡nh)
â”‚   â”œâ”€â”€ Roles (Vai trÃ²)
â”‚   â””â”€â”€ Employees (NhÃ¢n viÃªn)
â”‚
â”œâ”€â”€ 2. QUáº¢N LÃ KHÃCH HÃ€NG
â”‚   â”œâ”€â”€ Customers (KhÃ¡ch hÃ ng)
â”‚   â””â”€â”€ CreditScores (Äiá»ƒm tÃ­n dá»¥ng)
â”‚
â”œâ”€â”€ 3. TÃ€I KHOáº¢N & GIAO Dá»ŠCH
â”‚   â”œâ”€â”€ AccountTypes (Loáº¡i tÃ i khoáº£n)
â”‚   â”œâ”€â”€ Accounts (TÃ i khoáº£n)
â”‚   â”œâ”€â”€ Cards (Tháº» ngÃ¢n hÃ ng)
â”‚   â”œâ”€â”€ TransactionTypes (Loáº¡i giao dá»‹ch)
â”‚   â””â”€â”€ Transactions (Giao dá»‹ch)
â”‚       - from_bank_name VARCHAR(200)
â”‚       - to_bank_name VARCHAR(200)
â”‚
â”œâ”€â”€ 4. TIáº¾T KIá»†M
â”‚   â”œâ”€â”€ SavingsInterestRates (LÃ£i suáº¥t tiáº¿t kiá»‡m)
â”‚   â”œâ”€â”€ SavingsDeposits (Sá»• tiáº¿t kiá»‡m)
â”‚   â””â”€â”€ SavingsTransactions (Giao dá»‹ch tiáº¿t kiá»‡m)
â”‚
â””â”€â”€ 5. VAY Vá»N
    â”œâ”€â”€ CollateralTypes (Loáº¡i tÃ i sáº£n)
    â”œâ”€â”€ Collaterals (TÃ i sáº£n tháº¿ cháº¥p)
    â”œâ”€â”€ LoanTypes (Loáº¡i hÃ¬nh vay)
    â”œâ”€â”€ LoanInterestRates (LÃ£i suáº¥t cho vay)
    â””â”€â”€ Loans (Khoáº£n vay)
```

### 4.2. Database Design Patterns

#### 4.2.1. Normalization
- **3NF (Third Normal Form)**: Táº¥t cáº£ tables Ä‘á»u Ä‘áº¡t chuáº©n 3NF
- **Foreign Keys**: Sá»­ dá»¥ng foreign key constraints Ä‘á»ƒ Ä‘áº£m báº£o referential integrity
- **Indexes**: Táº¡o indexes cho cÃ¡c trÆ°á»ng thÆ°á»ng xuyÃªn query

#### 4.2.2. Naming Conventions
- **Tables**: PascalCase, sá»‘ nhiá»u (e.g., `Customers`, `Transactions`)
- **Columns**: snake_case (e.g., `customer_id`, `account_number`)
- **Primary Keys**: `{table_name}_id` (e.g., `customer_id`, `loan_id`)
- **Foreign Keys**: `{referenced_table}_id` (e.g., `customer_id`, `branch_id`)

#### 4.2.3. Data Types
- **IDs**: `INT` hoáº·c `BIGINT` vá»›i `AUTO_INCREMENT`
- **Codes**: `VARCHAR(20)` hoáº·c `VARCHAR(50)` vá»›i `UNIQUE`
- **Names**: `VARCHAR(200)` hoáº·c `VARCHAR(500)`
- **Amounts**: `DECIMAL(18,2)` cho tiá»n tá»‡
- **Dates**: `DATE` hoáº·c `TIMESTAMP`
- **Status**: `ENUM` cho cÃ¡c giÃ¡ trá»‹ cá»‘ Ä‘á»‹nh

### 4.3. Database Features

#### 4.3.1. Triggers
```sql
-- Tá»± Ä‘á»™ng tÃ­nh LTV ratio khi cáº­p nháº­t collateral_value
CREATE TRIGGER calculate_ltv_after_collateral_update
AFTER UPDATE ON Collaterals
FOR EACH ROW
BEGIN
  UPDATE Loans
  SET ltv_ratio = (loan_amount / NEW.appraised_value) * 100
  WHERE collateral_id = NEW.collateral_id;
END;
```

#### 4.3.2. Views
```sql
-- View tá»•ng há»£p thÃ´ng tin khoáº£n vay
CREATE VIEW LoanDetails AS
SELECT 
  l.*,
  c.full_name AS customer_name,
  lt.type_name AS loan_type_name,
  col.collateral_name
FROM Loans l
JOIN Customers c ON l.customer_id = c.customer_id
JOIN LoanTypes lt ON l.loan_type_id = lt.loan_type_id
LEFT JOIN Collaterals col ON l.collateral_id = col.collateral_id;
```

#### 4.3.3. Stored Procedures
```sql
-- TÃ­nh lÃ£i tiáº¿t kiá»‡m tá»± Ä‘á»™ng
DELIMITER //
CREATE PROCEDURE CalculateSavingsInterest(IN deposit_id INT)
BEGIN
  -- Logic tÃ­nh lÃ£i
END //
DELIMITER ;
```

### 4.4. Transaction Management

Database sá»­ dá»¥ng **ACID properties** vá»›i InnoDB engine:

- **Atomicity**: Má»—i transaction lÃ  má»™t Ä‘Æ¡n vá»‹ khÃ´ng thá»ƒ chia nhá»
- **Consistency**: Dá»¯ liá»‡u luÃ´n á»Ÿ tráº¡ng thÃ¡i há»£p lá»‡
- **Isolation**: Transactions khÃ´ng áº£nh hÆ°á»Ÿng láº«n nhau
- **Durability**: Dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u vÄ©nh viá»…n

**VÃ­ dá»¥**: Chuyá»ƒn khoáº£n
```sql
START TRANSACTION;
  UPDATE Accounts SET balance = balance - 1000000 WHERE account_id = 1;
  UPDATE Accounts SET balance = balance + 1000000 WHERE account_id = 2;
  INSERT INTO Transactions (...) VALUES (...);
COMMIT;
```

---

## 5. Luá»“ng dá»¯ liá»‡u

### 5.1. Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ 1. Nháº­p username/password
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LoginPage   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 2. Validate input
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  mockData.js â”‚ (Hiá»‡n táº¡i: kiá»ƒm tra trong mock data)
â”‚  - employees â”‚ (TÆ°Æ¡ng lai: gá»i API /api/auth/login)
â”‚  - customers â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 3. Return user object
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  App.jsx     â”‚
â”‚  setUser()   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 4. Navigate based on role
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard   â”‚ (Customer/Admin/Teller/LoanOfficer)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2. Data Fetching Flow

**Hiá»‡n táº¡i (Mock Data)**:
```
Component
  â”‚
  â”œâ”€â†’ getCustomerAccounts(customerId)
  â”‚   â””â”€â†’ Filter & map tá»« accounts array
  â”‚
  â”œâ”€â†’ getPendingLoansWithDetails()
  â”‚   â””â”€â†’ Join loans, customers, loanTypes, creditScores
  â”‚
  â””â”€â†’ formatCurrency(amount)
      â””â”€â†’ Format sá»‘ tiá»n VND
```

**TÆ°Æ¡ng lai (API)**:
```
Component
  â”‚
  â”œâ”€â†’ useCustomerAccounts(customerId)
  â”‚   â””â”€â†’ GET /api/customers/{id}/accounts
  â”‚       â””â”€â†’ Backend Service
  â”‚           â””â”€â†’ Database Query
  â”‚
  â”œâ”€â†’ usePendingLoans()
  â”‚   â””â”€â†’ GET /api/loans?status=PENDING
  â”‚
  â””â”€â†’ formatCurrency(amount) (Client-side)
```

### 5.3. Form Submission Flow

**VÃ­ dá»¥: Chuyá»ƒn khoáº£n**
```
Transfer Component
  â”‚
  â”œâ”€â†’ User nháº­p form data
  â”‚   - fromAccount
  â”‚   - toBank
  â”‚   - toAccount
  â”‚   - amount
  â”‚   - description
  â”‚
  â”œâ”€â†’ handleSubmit(e)
  â”‚   â”‚
  â”‚   â”œâ”€â†’ Validate input
  â”‚   â”‚
  â”‚   â”œâ”€â†’ Check balance (mockData)
  â”‚   â”‚
  â”‚   â”œâ”€â†’ Determine: ná»™i bá»™ hay liÃªn ngÃ¢n hÃ ng
  â”‚   â”‚
  â”‚   â”œâ”€â†’ Calculate fee (náº¿u liÃªn ngÃ¢n hÃ ng)
  â”‚   â”‚
  â”‚   â””â”€â†’ Create transaction record
  â”‚
  â””â”€â†’ Show success/error message
```

**TÆ°Æ¡ng lai (API)**:
```
Transfer Component
  â”‚
  â””â”€â†’ POST /api/transactions/transfer
      â”‚
      â”œâ”€â†’ Backend validates
      â”œâ”€â†’ Check balance
      â”œâ”€â†’ Create transaction
      â”œâ”€â†’ Update accounts
      â””â”€â†’ Return result
```

---

## 6. Báº£o máº­t vÃ  PhÃ¢n quyá»n

### 6.1. Role-Based Access Control (RBAC)

Há»‡ thá»‘ng cÃ³ **4 roles chÃ­nh**:

| Role | Quyá»n truy cáº­p |
|------|----------------|
| **CUSTOMER** | - Xem tÃ i khoáº£n cá»§a mÃ¬nh<br>- Chuyá»ƒn khoáº£n<br>- ÄÄƒng kÃ½ vay<br>- Xem Ä‘iá»ƒm tÃ­n dá»¥ng |
| **TELLER** | - Má»Ÿ tÃ i khoáº£n má»›i<br>- Náº¡p/rÃºt tiá»n<br>- KÃ­ch hoáº¡t tháº» |
| **LOAN_OFFICER** | - Xem há»“ sÆ¡ vay<br>- Tháº©m Ä‘á»‹nh tÃ i sáº£n<br>- PhÃª duyá»‡t/tá»« chá»‘i vay<br>- Quáº£n lÃ½ Ä‘iá»ƒm tÃ­n dá»¥ng |
| **ADMIN** | - Quáº£n lÃ½ chi nhÃ¡nh<br>- Quáº£n lÃ½ nhÃ¢n viÃªn<br>- Xem bÃ¡o cÃ¡o tá»•ng há»£p |

### 6.2. Route Protection

```javascript
// App.jsx
<Route 
  path="/customer/*" 
  element={user?.role === 'CUSTOMER' ? 
    <CustomerDashboard /> : 
    <Navigate to="/" />} 
/>
```

**TÆ°Æ¡ng lai**: Cáº§n thÃªm:
- **JWT Token**: LÆ°u trong localStorage hoáº·c httpOnly cookie
- **Token Refresh**: Tá»± Ä‘á»™ng refresh token khi háº¿t háº¡n
- **API Authorization**: Middleware kiá»ƒm tra token á»Ÿ backend

### 6.3. Data Security

**Hiá»‡n táº¡i**:
- Password Ä‘Æ°á»£c hash (trong mock data: giáº£ Ä‘á»‹nh Ä‘Ã£ hash)
- KhÃ´ng lÆ°u sensitive data trong localStorage

**TÆ°Æ¡ng lai**:
- **Password Hashing**: bcrypt vá»›i salt rounds
- **HTTPS**: Báº¯t buá»™c cho production
- **Input Validation**: Sanitize user input
- **SQL Injection Prevention**: Prepared statements
- **XSS Prevention**: Escape output

---

## 7. Má»Ÿ rá»™ng vÃ  Tá»‘i Æ°u

### 7.1. Scalability

#### 7.1.1. Frontend
- **Code Splitting**: Lazy load routes vÃ  components
- **Image Optimization**: Sá»­ dá»¥ng WebP, lazy loading
- **Bundle Size**: Tree shaking, minification

#### 7.1.2. Backend (Dá»± kiáº¿n)
- **Horizontal Scaling**: Load balancer vá»›i multiple instances
- **Caching**: Redis cho frequently accessed data
- **Database**: Read replicas cho read-heavy operations

#### 7.1.3. Database
- **Indexing**: Tá»‘i Æ°u indexes cho queries thÆ°á»ng dÃ¹ng
- **Partitioning**: Partition tables lá»›n theo date hoáº·c region
- **Connection Pooling**: Quáº£n lÃ½ database connections hiá»‡u quáº£

### 7.2. Performance Optimization

#### 7.2.1. Frontend
```javascript
// Memoization
const MemoizedComponent = React.memo(ExpensiveComponent);

// useMemo cho expensive calculations
const filteredLoans = useMemo(() => {
  return loans.filter(l => l.status === 'PENDING');
}, [loans]);

// useCallback cho event handlers
const handleSubmit = useCallback((e) => {
  // ...
}, [dependencies]);
```

#### 7.2.2. Database
- **Query Optimization**: Sá»­ dá»¥ng EXPLAIN Ä‘á»ƒ phÃ¢n tÃ­ch queries
- **Avoid N+1 Queries**: Sá»­ dá»¥ng JOINs thay vÃ¬ multiple queries
- **Pagination**: Limit sá»‘ records tráº£ vá»

### 7.3. Monitoring vÃ  Logging

**TÆ°Æ¡ng lai cáº§n cÃ³**:
- **Error Tracking**: Sentry hoáº·c similar
- **Performance Monitoring**: APM tools
- **Logging**: Structured logging vá»›i Winston hoáº·c Pino
- **Analytics**: User behavior tracking

### 7.4. Testing Strategy

**Unit Tests**:
- Test helper functions trong `mockData.js`
- Test component logic vá»›i React Testing Library

**Integration Tests**:
- Test API endpoints
- Test database operations

**E2E Tests**:
- Test user flows vá»›i Cypress hoáº·c Playwright

---

## 8. Káº¿t luáº­n

### 8.1. Äiá»ƒm máº¡nh cá»§a kiáº¿n trÃºc hiá»‡n táº¡i

1. **Modular Structure**: Components Ä‘Æ°á»£c tá»• chá»©c rÃµ rÃ ng theo features
2. **Separation of Concerns**: TÃ¡ch biá»‡t data layer, presentation layer
3. **Scalable Database Design**: Schema Ä‘Æ°á»£c normalize tá»‘t, dá»… má»Ÿ rá»™ng
4. **Role-Based Access**: Routing vÃ  UI Ä‘Æ°á»£c phÃ¢n quyá»n rÃµ rÃ ng

### 8.2. Cáº§n cáº£i thiá»‡n

1. **State Management**: NÃ¢ng cáº¥p lÃªn Context API hoáº·c Redux khi cáº§n
2. **API Integration**: Thay tháº¿ mock data báº±ng real API calls
3. **Error Handling**: ThÃªm error boundaries vÃ  error handling tá»‘t hÆ¡n
4. **Testing**: Bá»• sung unit tests vÃ  integration tests
5. **Documentation**: API documentation vá»›i Swagger/OpenAPI

### 8.3. Roadmap

**Phase 1 (Hiá»‡n táº¡i)**: âœ…
- Frontend vá»›i mock data
- Database schema
- Basic UI/UX

**Phase 2 (Tiáº¿p theo)**:
- Backend API development
- Authentication & Authorization
- API integration vá»›i frontend

**Phase 3 (TÆ°Æ¡ng lai)**:
- Performance optimization
- Testing coverage
- Production deployment
- Monitoring & Logging

---

**TÃ i liá»‡u nÃ y Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng dá»±a trÃªn phÃ¢n tÃ­ch codebase hiá»‡n táº¡i.**
**Cáº­p nháº­t láº§n cuá»‘i: 2025-01-27**

